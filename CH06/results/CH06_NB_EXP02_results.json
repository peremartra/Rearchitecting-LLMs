{
    "metadata": {
        "experiment_name": "Layer Mapping & Advanced KD Comparison",
        "timestamp": "2026-01-17T18:00:04.760091",
        "versions": {
            "torch": "2.9.0+cu126"
        }
    },
    "models": {
        "teacher": "google/gemma-3-270m",
        "student": "Gemma-270m-Pruned (14 layers)"
    },
    "experiments": {
        "teacher": {
            "type": "baseline",
            "metrics": {
                "time_min": 0.0,
                "perplexity": 13.385269421207692,
                "recovery_%": 100.0,
                "arc_easy": 0.582,
                "hellaswag": 0.474,
                "lambada_openai": 0.422,
                "piqa": 0.702,
                "winogrande": 0.55,
                "cap_retention_%": 100.0,
                "retention_%": 100.0,
                "overall_retention_%": 100.0
            }
        },
        "student_pruned": {
            "type": "baseline",
            "metrics": {
                "time_min": 0.0,
                "perplexity": 490.2243912113651,
                "recovery_%": 0.0,
                "arc_easy": 0.338,
                "hellaswag": 0.37,
                "lambada_openai": 0.002,
                "piqa": 0.566,
                "winogrande": 0.512,
                "cap_retention_%": 65.49450549450549,
                "retention_%": 2.7304372571369058,
                "overall_retention_%": 34.1124713758212
            }
        },
        "last_layer_logits_only": {
            "type": "trained_student",
            "config": {
                "alpha": 0.5,
                "beta": 0.5,
                "gamma": 0.0,
                "temp": 2.0,
                "mapping": "last_layer",
                "description": "Logits-only KD"
            },
            "metrics": {
                "time_min": 3.6315623998641966,
                "perplexity": 29.10371532094443,
                "recovery_%": 96.70361654875835,
                "arc_easy": 0.468,
                "hellaswag": 0.43,
                "lambada_openai": 0.146,
                "piqa": 0.628,
                "winogrande": 0.534,
                "cap_retention_%": 80.8058608058608,
                "retention_%": 45.991617474264565,
                "overall_retention_%": 63.39873914006269
            },
            "training_stats": {
                "total_time_seconds": 217.8937439918518,
                "final_loss": 2.584051724137931,
                "epochs_trained": 5
            }
        },
        "last_layer_features": {
            "type": "trained_student",
            "config": {
                "alpha": 0.4,
                "beta": 0.4,
                "gamma": 0.2,
                "temp": 2.0,
                "mapping": "last_layer",
                "description": "Standard Feature Alignment (Cosine)"
            },
            "metrics": {
                "time_min": 3.713146984577179,
                "perplexity": 29.161288721259925,
                "recovery_%": 96.69154258131638,
                "arc_easy": 0.47,
                "hellaswag": 0.432,
                "lambada_openai": 0.15,
                "piqa": 0.63,
                "winogrande": 0.538,
                "cap_retention_%": 81.31868131868131,
                "retention_%": 45.90081580122079,
                "overall_retention_%": 63.60974855995105
            },
            "training_stats": {
                "total_time_seconds": 222.78881907463074,
                "final_loss": 2.134967672413793,
                "epochs_trained": 5
            }
        },
        "selected_layer_features": {
            "type": "trained_student",
            "config": {
                "alpha": 0.4,
                "beta": 0.4,
                "gamma": 0.2,
                "temp": 2.0,
                "mapping": "original_indices",
                "description": "Standard Feature Alignment (Cosine)"
            },
            "metrics": {
                "time_min": 3.713146984577179,
                "perplexity": 28.542636279869107,
                "recovery_%": 96.82128286753039,
                "arc_easy": 0.474,
                "hellaswag": 0.436,
                "lambada_openai": 0.152,
                "piqa": 0.634,
                "winogrande": 0.562,
                "cap_retention_%": 82.7106227106227,
                "retention_%": 46.89570118877987,
                "overall_retention_%": 64.80316194970129
            },
            "training_stats": {
                "total_time_seconds": 222.94430661201477,
                "final_loss": 2.0424973060344827,
                "epochs_trained": 5
            }
        },
        "uniform_advanced_kd": {
            "type": "trained_student",
            "config": {
                "alpha": 0.2,
                "beta": 0.3,
                "gamma": 0.3,
                "delta": 0.2,
                "skew": 0.5,
                "mapping": "uniform",
                "description": "Skew KLD + FDD (Trajectory & Derivative)"
            },
            "metrics": {
                "time_min": 4.067101474603017,
                "perplexity": 26.308967890242872,
                "recovery_%": 97.28971515161827,
                "arc_easy": 0.466,
                "hellaswag": 0.43,
                "lambada_openai": 0.17,
                "piqa": 0.626,
                "winogrande": 0.528,
                "cap_retention_%": 81.31868131868131,
                "retention_%": 50.87721220022412,
                "overall_retention_%": 66.09794675945273
            },
            "training_stats": {
                "total_time_seconds": 244.02608847618103,
                "final_loss": 1.020251367626519,
                "epochs_trained": 5
            }
        },
        "selected_advanced_kd": {
            "type": "trained_student",
            "config": {
                "alpha": 0.2,
                "beta": 0.3,
                "gamma": 0.3,
                "delta": 0.2,
                "skew": 0.5,
                "mapping": "original_indices",
                "description": "Skew KLD + FDD (Trajectory & Derivative)"
            },
            "metrics": {
                "time_min": 4.055117809772492,
                "perplexity": 25.717133897720373,
                "recovery_%": 97.41383122462432,
                "arc_easy": 0.458,
                "hellaswag": 0.434,
                "lambada_openai": 0.166,
                "piqa": 0.622,
                "winogrande": 0.518,
                "cap_retention_%": 80.51282051282051,
                "retention_%": 52.0480605437692,
                "overall_retention_%": 66.28044052829486
            },
            "training_stats": {
                "total_time_seconds": 243.3070685863495,
                "final_loss": 0.9286078404763649,
                "epochs_trained": 5
            }
        }
    }
}