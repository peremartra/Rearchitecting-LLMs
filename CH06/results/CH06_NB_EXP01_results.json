{
    "metadata": {
        "experiment_name": "Layer Mapping & Advanced KD Comparison",
        "timestamp": "2026-01-16T12:37:17.823363",
        "versions": {
            "torch": "2.9.0+cu126"
        }
    },
    "models": {
        "teacher": "google/gemma-3-270m",
        "student": "Gemma-270m-Pruned (14 layers)"
    },
    "experiments": {
        "teacher": {
            "type": "baseline",
            "metrics": {
                "time_min": 0.0,
                "perplexity": 13.385269421207692,
                "recovery_%": 100.0,
                "arc_easy": 0.582,
                "hellaswag": 0.474,
                "lambada_openai": 0.422,
                "piqa": 0.702,
                "winogrande": 0.55,
                "cap_retention_%": 100.0,
                "retention_%": 100.0,
                "overall_retention_%": 100.0
            }
        },
        "student_pruned": {
            "type": "baseline",
            "metrics": {
                "time_min": 0.0,
                "perplexity": 125.64550402631409,
                "recovery_%": 0.0,
                "arc_easy": 0.43,
                "hellaswag": 0.404,
                "lambada_openai": 0.184,
                "piqa": 0.594,
                "winogrande": 0.514,
                "cap_retention_%": 77.87545787545787,
                "retention_%": 10.65320205839152,
                "overall_retention_%": 44.26432996692469
            }
        },
        "last_layer_logits_only": {
            "type": "trained_student",
            "config": {
                "alpha": 0.5,
                "beta": 0.5,
                "gamma": 0.0,
                "temp": 2.0,
                "mapping": "last_layer",
                "description": "Logits-only KD"
            },
            "metrics": {
                "time_min": 3.6385690530141193,
                "perplexity": 23.988158548202097,
                "recovery_%": 90.5550801988863,
                "arc_easy": 0.496,
                "hellaswag": 0.432,
                "lambada_openai": 0.276,
                "piqa": 0.618,
                "winogrande": 0.516,
                "cap_retention_%": 85.64102564102564,
                "retention_%": 55.799487044039545,
                "overall_retention_%": 70.7202563425326
            },
            "training_stats": {
                "total_time_seconds": 218.31414318084717,
                "final_loss": 2.343615301724138,
                "epochs_trained": 5
            }
        },
        "last_layer_features": {
            "type": "trained_student",
            "config": {
                "alpha": 0.4,
                "beta": 0.4,
                "gamma": 0.2,
                "temp": 2.0,
                "mapping": "last_layer",
                "description": "Standard Feature Alignment (Cosine)"
            },
            "metrics": {
                "time_min": 3.719241221745809,
                "perplexity": 23.44151945188047,
                "recovery_%": 91.04201940602809,
                "arc_easy": 0.496,
                "hellaswag": 0.434,
                "lambada_openai": 0.282,
                "piqa": 0.626,
                "winogrande": 0.522,
                "cap_retention_%": 86.44688644688644,
                "retention_%": 57.10069028880264,
                "overall_retention_%": 71.77378836784453
            },
            "training_stats": {
                "total_time_seconds": 223.15447330474854,
                "final_loss": 1.8991109913793103,
                "epochs_trained": 5
            }
        },
        "selected_layer_features": {
            "type": "trained_student",
            "config": {
                "alpha": 0.4,
                "beta": 0.4,
                "gamma": 0.2,
                "temp": 2.0,
                "mapping": "original_indices",
                "description": "Standard Feature Alignment (Cosine)"
            },
            "metrics": {
                "time_min": 3.719241221745809,
                "perplexity": 23.824398276022382,
                "recovery_%": 90.70095578230706,
                "arc_easy": 0.492,
                "hellaswag": 0.43,
                "lambada_openai": 0.272,
                "piqa": 0.634,
                "winogrande": 0.518,
                "cap_retention_%": 85.93406593406593,
                "retention_%": 56.18303247842798,
                "overall_retention_%": 71.05854920624695
            },
            "training_stats": {
                "total_time_seconds": 222.14044046401978,
                "final_loss": 1.8778286637931034,
                "epochs_trained": 5
            }
        },
        "uniform_advanced_kd": {
            "type": "trained_student",
            "config": {
                "alpha": 0.2,
                "beta": 0.3,
                "gamma": 0.3,
                "delta": 0.2,
                "skew": 0.5,
                "mapping": "uniform",
                "description": "Skew KLD + FDD (Trajectory & Derivative)"
            },
            "metrics": {
                "time_min": 4.060366837183635,
                "perplexity": 21.380170572072135,
                "recovery_%": 92.87824296912633,
                "arc_easy": 0.468,
                "hellaswag": 0.44,
                "lambada_openai": 0.304,
                "piqa": 0.622,
                "winogrande": 0.536,
                "cap_retention_%": 86.81318681318682,
                "retention_%": 62.605999218229854,
                "overall_retention_%": 74.70959301570834
            },
            "training_stats": {
                "total_time_seconds": 243.62201023101807,
                "final_loss": 0.9098314247254667,
                "epochs_trained": 5
            }
        },
        "selected_advanced_kd": {
            "type": "trained_student",
            "config": {
                "alpha": 0.2,
                "beta": 0.3,
                "gamma": 0.3,
                "delta": 0.2,
                "skew": 0.5,
                "mapping": "original_indices",
                "description": "Skew KLD + FDD (Trajectory & Derivative)"
            },
            "metrics": {
                "time_min": 4.036702473958333,
                "perplexity": 22.053236725699776,
                "recovery_%": 92.27868413514095,
                "arc_easy": 0.464,
                "hellaswag": 0.436,
                "lambada_openai": 0.28,
                "piqa": 0.624,
                "winogrande": 0.522,
                "cap_retention_%": 85.2014652014652,
                "retention_%": 60.69526023637676,
                "overall_retention_%": 72.94836271892098
            },
            "training_stats": {
                "total_time_seconds": 242.2021484375,
                "final_loss": 0.8902157247066498,
                "epochs_trained": 5
            }
        }
    }
}