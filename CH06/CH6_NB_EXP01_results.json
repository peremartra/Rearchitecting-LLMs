{
    "metadata": {
        "experiment_name": "Layer Mapping & Advanced KD Comparison",
        "timestamp": "2026-01-12T16:34:55.231891",
        "versions": {
            "torch": "2.9.0+cu126"
        }
    },
    "models": {
        "teacher": "google/gemma-3-270m",
        "student": "Gemma-270m-Pruned (14 layers)"
    },
    "experiments": {
        "teacher": {
            "type": "baseline",
            "metrics": {
                "time_min": 0.0,
                "perplexity": 12.970958920775756,
                "recovery_%": 100.0,
                "arc_easy": 0.582,
                "hellaswag": 0.474,
                "lambada_openai": 0.422,
                "piqa": 0.702,
                "winogrande": 0.55,
                "cap_retention_%": 100.0,
                "overall_recovery_%": 100.0
            }
        },
        "student_pruned": {
            "type": "baseline",
            "metrics": {
                "time_min": 0.0,
                "perplexity": 121.9712014322044,
                "recovery_%": 0.0,
                "arc_easy": 0.43,
                "hellaswag": 0.404,
                "lambada_openai": 0.184,
                "piqa": 0.594,
                "winogrande": 0.514,
                "cap_retention_%": 77.87545787545787,
                "overall_recovery_%": 38.937728937728934
            }
        },
        "uniform_logits_only": {
            "type": "trained_student",
            "config": {
                "alpha": 0.5,
                "beta": 0.5,
                "gamma": 0.0,
                "temp": 2.0,
                "mapping": "uniform",
                "description": "Logits-only KD"
            },
            "metrics": {
                "time_min": 4.012613189220429,
                "perplexity": 21.699009150863212,
                "recovery_%": 91.99263228320585,
                "arc_easy": 0.504,
                "hellaswag": 0.438,
                "lambada_openai": 0.278,
                "piqa": 0.626,
                "winogrande": 0.526,
                "cap_retention_%": 86.88644688644688,
                "overall_recovery_%": 89.43953958482636
            },
            "training_stats": {
                "total_time_seconds": 240.7567913532257,
                "final_loss": 2.3033447265625,
                "epochs_trained": 5
            }
        },
        "last_layer_logits_only": {
            "type": "trained_student",
            "config": {
                "alpha": 0.5,
                "beta": 0.5,
                "gamma": 0.0,
                "temp": 2.0,
                "mapping": "last_layer",
                "description": "Logits-only KD"
            },
            "metrics": {
                "time_min": 4.011540035406749,
                "perplexity": 21.55031623140395,
                "recovery_%": 92.12904750213868,
                "arc_easy": 0.5,
                "hellaswag": 0.436,
                "lambada_openai": 0.274,
                "piqa": 0.626,
                "winogrande": 0.532,
                "cap_retention_%": 86.73992673992673,
                "overall_recovery_%": 89.4344871210327
            },
            "training_stats": {
                "total_time_seconds": 240.6924021244049,
                "final_loss": 2.2855224609375,
                "epochs_trained": 5
            }
        },
        "selected_layer_logits_only": {
            "type": "trained_student",
            "config": {
                "alpha": 0.5,
                "beta": 0.5,
                "gamma": 0.0,
                "temp": 2.0,
                "mapping": "original_indices",
                "description": "Logits-only KD"
            },
            "metrics": {
                "time_min": 4.012613189220429,
                "perplexity": 21.39904456585543,
                "recovery_%": 92.26782853790807,
                "arc_easy": 0.506,
                "hellaswag": 0.436,
                "lambada_openai": 0.28,
                "piqa": 0.628,
                "winogrande": 0.53,
                "cap_retention_%": 87.17948717948717,
                "overall_recovery_%": 89.72365785869762
            },
            "training_stats": {
                "total_time_seconds": 240.6924021244049,
                "final_loss": 2.2855224609375,
                "epochs_trained": 5
            }
        },
        "last_layer_features": {
            "type": "trained_student",
            "config": {
                "alpha": 0.4,
                "beta": 0.4,
                "gamma": 0.2,
                "temp": 2.0,
                "mapping": "last_layer",
                "description": "Standard Feature Alignment (Cosine)"
            },
            "metrics": {
                "time_min": 4.088454059759775,
                "perplexity": 21.53620756977037,
                "recovery_%": 92.1419911996099,
                "arc_easy": 0.51,
                "hellaswag": 0.436,
                "lambada_openai": 0.286,
                "piqa": 0.624,
                "winogrande": 0.524,
                "cap_retention_%": 87.17948717948717,
                "overall_recovery_%": 89.66073918954854
            },
            "training_stats": {
                "total_time_seconds": 245.30724358558655,
                "final_loss": 1.88214111328125,
                "epochs_trained": 5
            }
        },
        "selected_layer_features": {
            "type": "trained_student",
            "config": {
                "alpha": 0.4,
                "beta": 0.4,
                "gamma": 0.2,
                "temp": 2.0,
                "mapping": "original_indices",
                "description": "Standard Feature Alignment (Cosine)"
            },
            "metrics": {
                "time_min": 4.088454059759775,
                "perplexity": 21.54088697477609,
                "recovery_%": 92.137698177046,
                "arc_easy": 0.502,
                "hellaswag": 0.436,
                "lambada_openai": 0.284,
                "piqa": 0.626,
                "winogrande": 0.514,
                "cap_retention_%": 86.52014652014653,
                "overall_recovery_%": 89.32892234859627
            },
            "training_stats": {
                "total_time_seconds": 245.1474552154541,
                "final_loss": 1.8387451171875,
                "epochs_trained": 5
            }
        },
        "uniform_advanced_kd": {
            "type": "trained_student",
            "config": {
                "alpha": 0.2,
                "beta": 0.3,
                "gamma": 0.3,
                "delta": 0.2,
                "skew": 0.5,
                "mapping": "uniform",
                "description": "Skew KLD + FDD (Trajectory & Derivative)"
            },
            "metrics": {
                "time_min": 4.473419694105784,
                "perplexity": 17.1833406873786,
                "recovery_%": 96.1354381700929,
                "arc_easy": 0.488,
                "hellaswag": 0.44,
                "lambada_openai": 0.3,
                "piqa": 0.628,
                "winogrande": 0.528,
                "cap_retention_%": 87.32600732600731,
                "overall_recovery_%": 91.73072274805011
            },
            "training_stats": {
                "total_time_seconds": 268.40518164634705,
                "final_loss": 0.8354468708857894,
                "epochs_trained": 5
            }
        },
        "selected_advanced_kd": {
            "type": "trained_student",
            "config": {
                "alpha": 0.2,
                "beta": 0.3,
                "gamma": 0.3,
                "delta": 0.2,
                "skew": 0.5,
                "mapping": "original_indices",
                "description": "Skew KLD + FDD (Trajectory & Derivative)"
            },
            "metrics": {
                "time_min": 4.473419694105784,
                "perplexity": 17.426991951547308,
                "recovery_%": 95.91190539754594,
                "arc_easy": 0.492,
                "hellaswag": 0.43,
                "lambada_openai": 0.298,
                "piqa": 0.634,
                "winogrande": 0.528,
                "cap_retention_%": 87.25274725274726,
                "overall_recovery_%": 91.5823263251466
            },
            "training_stats": {
                "total_time_seconds": 268.40518164634705,
                "final_loss": 0.8354468708857894,
                "epochs_trained": 5
            }
        }
    }
}