{
    "metadata": {
        "experiment_name": "Layer Mapping & Advanced KD Comparison",
        "timestamp": "2026-01-14T07:39:54.837517",
        "versions": {
            "torch": "2.9.0+cu126"
        }
    },
    "models": {
        "teacher": "google/gemma-3-270m",
        "student": "Gemma-270m-Pruned (14 layers)"
    },
    "experiments": {
        "teacher": {
            "type": "baseline",
            "metrics": {
                "time_min": 0.0,
                "perplexity": 12.971054449173515,
                "recovery_%": 100.0,
                "arc_easy": 0.582,
                "hellaswag": 0.474,
                "lambada_openai": 0.422,
                "piqa": 0.702,
                "winogrande": 0.55,
                "cap_retention_%": 100.0,
                "overall_recovery_%": 100.0
            }
        },
        "student_pruned": {
            "type": "baseline",
            "metrics": {
                "time_min": 0.0,
                "perplexity": 250.9854250904118,
                "recovery_%": 5.168050871679496,
                "arc_easy": 0.4,
                "hellaswag": 0.362,
                "lambada_openai": 0.23,
                "piqa": 0.57,
                "winogrande": 0.512,
                "cap_retention_%": 75.97069597069596,
                "overall_recovery_%": 40.56937342118773
            }
        },
        "uniform_logits_only": {
            "type": "trained_student",
            "config": {
                "alpha": 0.5,
                "beta": 0.5,
                "gamma": 0.0,
                "temp": 2.0,
                "mapping": "uniform",
                "description": "Logits-only KD"
            },
            "metrics": {
                "time_min": 4.019424855709076,
                "perplexity": 26.62677547624059,
                "recovery_%": 48.714326902811614,
                "arc_easy": 0.436,
                "hellaswag": 0.402,
                "lambada_openai": 0.272,
                "piqa": 0.596,
                "winogrande": 0.532,
                "cap_retention_%": 81.97802197802197,
                "overall_recovery_%": 65.34617444041679
            },
            "training_stats": {
                "total_time_seconds": 241.16549134254456,
                "final_loss": 2.7733154296875,
                "epochs_trained": 5
            }
        },
        "last_layer_logits_only": {
            "type": "trained_student",
            "config": {
                "alpha": 0.5,
                "beta": 0.5,
                "gamma": 0.0,
                "temp": 2.0,
                "mapping": "last_layer",
                "description": "Logits-only KD"
            },
            "metrics": {
                "time_min": 4.018194385369619,
                "perplexity": 26.374226301213906,
                "recovery_%": 49.18079605837198,
                "arc_easy": 0.444,
                "hellaswag": 0.402,
                "lambada_openai": 0.274,
                "piqa": 0.6,
                "winogrande": 0.53,
                "cap_retention_%": 82.41758241758241,
                "overall_recovery_%": 65.7991892379772
            },
            "training_stats": {
                "total_time_seconds": 241.09166312217712,
                "final_loss": 2.7469482421875,
                "epochs_trained": 5
            }
        },
        "selected_layer_logits_only": {
            "type": "trained_student",
            "config": {
                "alpha": 0.5,
                "beta": 0.5,
                "gamma": 0.0,
                "temp": 2.0,
                "mapping": "original_indices",
                "description": "Logits-only KD"
            },
            "metrics": {
                "time_min": 4.019424855709076,
                "perplexity": 26.25823542078364,
                "recovery_%": 49.39804309510761,
                "arc_easy": 0.442,
                "hellaswag": 0.404,
                "lambada_openai": 0.268,
                "piqa": 0.598,
                "winogrande": 0.528,
                "cap_retention_%": 82.05128205128206,
                "overall_recovery_%": 65.72466257319483
            },
            "training_stats": {
                "total_time_seconds": 241.09166312217712,
                "final_loss": 2.7469482421875,
                "epochs_trained": 5
            }
        },
        "last_layer_features": {
            "type": "trained_student",
            "config": {
                "alpha": 0.4,
                "beta": 0.4,
                "gamma": 0.2,
                "temp": 2.0,
                "mapping": "last_layer",
                "description": "Standard Feature Alignment (Cosine)"
            },
            "metrics": {
                "time_min": 4.0907180865605675,
                "perplexity": 26.252031248854458,
                "recovery_%": 49.40971738992397,
                "arc_easy": 0.446,
                "hellaswag": 0.406,
                "lambada_openai": 0.272,
                "piqa": 0.598,
                "winogrande": 0.514,
                "cap_retention_%": 81.9047619047619,
                "overall_recovery_%": 65.65723964734293
            },
            "training_stats": {
                "total_time_seconds": 245.44308519363403,
                "final_loss": 2.2548828125,
                "epochs_trained": 5
            }
        },
        "selected_layer_features": {
            "type": "trained_student",
            "config": {
                "alpha": 0.4,
                "beta": 0.4,
                "gamma": 0.2,
                "temp": 2.0,
                "mapping": "original_indices",
                "description": "Standard Feature Alignment (Cosine)"
            },
            "metrics": {
                "time_min": 4.0907180865605675,
                "perplexity": 26.24078386339235,
                "recovery_%": 49.43089549725306,
                "arc_easy": 0.444,
                "hellaswag": 0.408,
                "lambada_openai": 0.274,
                "piqa": 0.596,
                "winogrande": 0.526,
                "cap_retention_%": 82.34432234432234,
                "overall_recovery_%": 65.8876089207877
            },
            "training_stats": {
                "total_time_seconds": 246.64503264427185,
                "final_loss": 2.213623046875,
                "epochs_trained": 5
            }
        },
        "uniform_advanced_kd": {
            "type": "trained_student",
            "config": {
                "alpha": 0.2,
                "beta": 0.3,
                "gamma": 0.3,
                "delta": 0.2,
                "skew": 0.5,
                "mapping": "uniform",
                "description": "Skew KLD + FDD (Trajectory & Derivative)"
            },
            "metrics": {
                "time_min": 4.497756751378377,
                "perplexity": 20.975926726175498,
                "recovery_%": 61.837813501642145,
                "arc_easy": 0.42,
                "hellaswag": 0.418,
                "lambada_openai": 0.284,
                "piqa": 0.59,
                "winogrande": 0.514,
                "cap_retention_%": 81.53846153846153,
                "overall_recovery_%": 71.68813752005184
            },
            "training_stats": {
                "total_time_seconds": 269.86540508270264,
                "final_loss": 1.0412428611889482,
                "epochs_trained": 5
            }
        },
        "selected_advanced_kd": {
            "type": "trained_student",
            "config": {
                "alpha": 0.2,
                "beta": 0.3,
                "gamma": 0.3,
                "delta": 0.2,
                "skew": 0.5,
                "mapping": "original_indices",
                "description": "Skew KLD + FDD (Trajectory & Derivative)"
            },
            "metrics": {
                "time_min": 4.497756751378377,
                "perplexity": 20.20551686822828,
                "recovery_%": 64.195608228016,
                "arc_easy": 0.434,
                "hellaswag": 0.428,
                "lambada_openai": 0.306,
                "piqa": 0.6,
                "winogrande": 0.532,
                "cap_retention_%": 84.24908424908423,
                "overall_recovery_%": 74.22234623855012
            },
            "training_stats": {
                "total_time_seconds": 269.86540508270264,
                "final_loss": 1.0412428611889482,
                "epochs_trained": 5
            }
        }
    }
}